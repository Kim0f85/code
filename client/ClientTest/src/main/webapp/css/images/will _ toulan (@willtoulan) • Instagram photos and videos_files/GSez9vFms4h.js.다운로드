;/*FB_PKG_DELIM*/

__d("useMWPPreloadThreadV1",["JSScheduler","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","ReQL","emptyFunction","promiseDone","react","useCometPreloader","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useCallback;function a(a,b,e,f){var g=(h||(h=c("useReStore")))(),k=l(function(){f&&e&&(j||(j=c("JSScheduler"))).scheduleSpeculativeCallback(function(){f.preload()}),c("promiseDone")(g.runInTransaction(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(g.tables.messages_ranges_v2__generated).getKeyRange(a)).then(function(e){if(e&&!e.isLoadingBefore)return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(b),{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:e.minTimestampMs,threadKey:a})})},"readwrite","ui"))},[JSON.stringify(a),e,f,g]);b=b?c("emptyFunction"):k;return c("useCometPreloader")("button",b,b)}g["default"]=a}),98);